# 滑膜变结构控制MATLAB仿真基本理论与设计方法

Authors: 刘金琨
Authors' affliation: Beihang University
Fields: Control Science and Engineering, cybernetics
Priority: high
Read: No
Venue: 书籍
Year: 2015

## Paper in 3 Sentences

1. 详尽介绍了滑模控制的理论以及matlab仿真

## Impressions

## Top 3 Quotes

- 

## Notes

### S-function输入输出含义

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled.png)

### chap1_1 绪论

plant.m是被控对象的设置，应当先从plant看起。

要求电机转动一度时系统的响应，data分别为理想转角、实际转角以及角速度

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%201.png)

k=10

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%202.png)

k=0

$k是控制律中的s的系数，代表的是李雅普诺夫能量导数\dot{V}≤-ks^2，即要求能量\\下降速度要足够大。$

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%203.png)

尝试跟随一个正弦信号sin(t/2)，得到上的结果，可以看到有一定跟随时间，而且加速度（data(3)）存在明显不平滑的现象，应该就是书中说的滑膜控制在滑模面附近的振动问题。

噢当我没说，我加了个d(t)=sint的干扰信号...把干扰信号去掉之后就好多了。

**控制律引入符号函数的原因：保证对应李雅普诺夫函数中$\dot{V}$始终存在一项$s*sgn(s)=-η|s|≤0$**

---

### chap2_1

不太理解那个Hurwitz条件...

```matlab
%%  控制对象初始化函数
function [sys,x0,str,ts]=mdlInitializeSizes     %   初始化
sizes = simsizes;                               %   建立一个类
sizes.NumContStates  = 2;                       %   模型有两个连续状态量dot{θ}和ddot{θ}
sizes.NumDiscStates  = 0;                       %   没有离散量
sizes.NumOutputs     = 2;                       %   两个输出θ和dot{θ}
sizes.NumInputs      = 1;                       %   一个输入u
sizes.DirFeedthrough = 0;                       %   输入信号没有直接在输出端出现
sizes.NumSampleTimes = 1;                       %   =1时需要设置采样时间和偏移量ts
sys = simsizes(sizes);                          %   =0就写ts = [ ] 就行
x0  = [0,0];                                    %   系统初始状态
str = [];
ts  = [0 0];                                    %   采样时间
```

### chap2_2 基于趋近率的滑模控制

使用指数趋近律$\dot{s}=-εsgns-ks$，其中-ks为指数趋近项，调整不同的k值可以得到不同的趋近速率。

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%204.png)

以上是系统的相轨迹图，可以看到**增大K能明显加快e的衰减速率，代价是鲁棒性变差，当e大于一定值后de>0，系统发散。**

### chap2_3 基于趋近率的鲁棒滑模控制

和上一个相比考虑多了个干扰d，被控对象变为

$\ddot{θ(t)}=-f(θ,t)+bu(t)+d(t)\\f(θ,t)=25\dot{θ}.$ 个人理解为阻尼量，干扰量$d(t)$无法确定，用干扰的上下界来设计控制律。(其实还是在控电机）

控制量u随时间的变化，可以看到存在明显不连续性，因为用了符号函数sgn，在s符号改变时干扰界的选择也发生了改变，不过对于电机而言力是可以瞬间改变的，不平滑好像也没什么问题。

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%205.png)

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%206.png)

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%207.png)

注意到一个问题，系统的相轨迹图中显示，在误差e很小的时候会出现部分de＞0的区域，说明实际上系统存在一个收敛的最小误差值，或许会影响精度。造成的原因应该就是上面提到的干扰的上下界的问题。

尝试将干扰量调到很大，可以明显看到系统的精度明显下降，同时速度的跟随也出现了很多毛刺，说明干扰量对系统的影响。

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%208.png)

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%209.png)

### chap2_4 基于上界的滑模控制

系统改为非线性系统（倒立摆），将符号函数sgn(s)替换为饱和函数sat(s)，书中提到的M指的是控制其的标识符，M=1代表用符号函数控制，M=2用饱和函数，其中sat(s)满足

$$
sat(s)=\left\{\begin{matrix}
  1,s>Δ\\
  ks,|s|≤Δ\\
  -1,s<Δ
\end{matrix}\right.
$$

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%2010.png)

**符号函数控制下的输入**

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%2011.png)

**饱和函数控制下的输入**

可以看到对比还是很明显的，饱和函数的加入明显减少了抖振的问题。

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%2012.png)

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%2013.png)

加入干扰项dt=0.2*sin(t)后的系统响应以及控制量的变化，效果还行，就是系统存在周期性变化的误差...

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%2014.png)

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%2015.png)

把干扰量加到一定值后系统就控制不住了，再往后加就发散了。

### chap2_5 基于准滑动模态的滑模控制

> 准滑动模态：系统的运动轨迹被限制在理想滑动模态的某一Δ邻域内的模态，称Δ邻域为滑动模态切换面的边界层。在边界层内（即s∈Δ时）不要求满足滑动模态的存在条件。
> 

实际上就是用饱和函数替代了符号函数，在边界层外采用的是切换控制（1或-1），在边界层内采用线性化反馈控制。

其实跟上一节差不多，程序就不看了。

### tanh_test

- **控制律引入符号函数的原因：保证对应李雅普诺夫函数中$\dot{V}$始终存在一项$s*sgn(s)=-η|s|≤0$**
- **改为饱和函数的原因：可以有效克服滑膜抖**
- **改为双曲正弦函数的原因：连续光滑，可以求导**

尝试了一下双曲正切函数

$$
tanh(\frac{x}{ε})=\frac{e^{\frac{x}{ε}}-e^{-\frac{x}{ε}}}{e^{\frac{x}{ε}}+e^{-\frac{x}{ε}}}
$$

调整ε的值可以得到不同的函数

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%2016.png)

ε=0.5

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%2017.png)

ε=10

### chap2_6 基于双曲正切函数的滑模控制

双曲正切函数的两个引理还蛮重要的，在证明李雅普诺夫能量收敛中有用，就记一下

1. 任意给定的x，存在ε>0，存在不等式
    
    $$
    xtanh(\frac{x}{ε})=|xtanh(\frac{x}{ε})|=|x||tanh(\frac{x}{ε})|≥0
    $$
    
2. 取ε>0，对于任意χ∈R，存在常数ε>0，如下不等式成立

$$
0≤|χ|-χtanh(\frac{χ}{ε})≤με,μ=0.2785
$$

### chap2_7 等效滑膜控制

在这里贴一个知乎回答，解释为什么叫等效滑模控制

> 在设计控制器时，先令$\dot{s}=0$，得到等效控制器$u_{eq}$，再将$u=u_{eq}+u_{sw}$带入，使$s\dot{s}≤-η|s|$成立，可以得到切换鲁棒项$u_{sw}$
> 

### chap2_8 滑模控制的数字化仿真

没什么特别的，无非是用了差分法用ode45求解了方程，其他大同小异。

---

### chap3_1 基于名义模型的滑模控制

碎碎念：名义模型有点看不懂，上知网看了半天的论文，发现还是刘金琨教授发的...好家伙国内就这位教授在研究这东西..

对于实际对象

$$
J\ddot{θ}+B\dot{θ}=u-d
$$

实际工程中无法精确获得真实的物理模型和干扰，需要建模得到真实对象的名义模型

$$
J_n\ddot{θ_n}+B_n\dot{θ_n}=μ
$$

其中u为控制输入，d为干扰，μ为名义模型控制律。

![IMG_20220328_170441.jpg](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/IMG_20220328_170441.jpg)

从左往右看，$θ_d$是期望值，与名义模型角度$θ_n$做差得到偏差$e_n$，输入至控制器中得到名义模型控制律$μ$并控制名义模型。此外名义模型角度$θ_n$和实际被控对象的角度$θ$做差得到$e$，将$e、μ、θ$作为输入进入控制器实际控制被控对象。

其实说到底就是用名义模型直接控制实际系统会有偏差，在名义模型后面再串个滑模控制器。

公式的推导其实蛮繁琐的。针对名义模型的控制器没有用滑模控制，设计控制律$μ$把名义模型中$\ddot{θ}$换成$\ddot{e}$，利用赫尔维兹稳定判据要求特征值无正实数部分就行。滑模控制器的设计用了些取巧的方法，个人理解的思路是根据滑膜函数$s=\dot{e_n}+λe_n$，先把李雅普诺夫函数$V=\frac{1}{2}Js^2$展开，即

$$
\dot{V}=J\dot{s}s=Js[\ddot{e_n}+λ\dot{e_n}]=Js[(\ddot{θ}-\ddot{θ_n})+λ(\dot{θ}-\dot{θ_n})]
$$

代入化简，可以把名义模型控制律$μ$带入，接着就是想着怎么凑滑模控制率$u$，把尽可能多的常量给约掉，至于最后怎么凑出来我觉得是经验性的东西...

### chap3_2 全局滑模控制

引入一个新的滑膜函数

$$
s=\dot{e}+ce-f(t)
$$

得到一个动态的非线性滑模面，消除滑模控制的到达运动状态，使系统在响应的全过程都具有鲁棒性。

这个抽象的概念我想可以用下面的比喻感性地理解一下：

想象水滴从高处落下至一张倒锥形的蛛网

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%2018.png)

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%2019.png)

由于重力的存在，即使水滴没有落到蛛网上，它依旧能一直向蛛网移动。当水滴被蛛网捕获后会被“黏”在网上。由于蛛网是倒锥形的，最终水滴将在网上向中间移动，汇聚成大水滴。

上面的例子中，我们可以定义水滴相对于蛛网的重力势能$mgh$为李雅普诺夫能量$V$，$\dot{V}=v<0$，（取速度向下为负），我们就确保水滴最终会到达滑模面（蛛网），水滴到达蛛网的这段过程称为“趋近模态”。但是我们无法保证水滴下落时不会被风干扰，即无法保证“鲁棒性”。与之相对的是当水滴粘在蛛网上，在滑模面上收敛时，此时就算风再大，水滴由于表面张力也不会轻易离开滑模面（蛛网），这时候我们就称系统对系统参数不确定性和外部扰动的鲁棒性存在于滑动模态阶段。

从上面可以看到，系统在趋近模态时是不具备鲁棒性的（水滴还没有落到蛛网上），但假如我们改变滑模面，把滑模面主动去靠近、捕获系统状态（比如水滴的坐标），控制系统自然就没有“趋近模态”。滑模面函数中的$f(t)$就是起这个作用的。$f(t)$需要满足以下条件：

1. $f(0)=\dot{e_0}+ce_0$（初始的时候 $s=0$恒成立，即一定是滑动模态）
2. $t→∞时，f(t)→0$（最终会恢复到正常的滑模面）
3. $f(t)$具有一阶导数

### chap3_3 基于线性化反馈的滑模控制

需要精确的模型信息，无法克服干扰，那算了

### chap3_4 输入输出反馈线性化控制

对象输出y如果和控制输入u没有直接联系，需要尝试构建y与u的关系（例如微分关系），线性化还是无法克服干扰

### chap3_5 基于输入输出反馈线性化的滑模控制

线性化反馈加了滑膜项，增加鲁棒性

### chap3_6 模型参考滑模控制

贴上DR_CAN的讲解

[【Advanced控制理论】16_Nonlinear Adaptive Controller_非线性自适应控制器_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1yW411u7qv?spm_id_from=333.999.0.0)

啊其实就是前面的“名义模型”

## Useful References

1. 以下为k=0时的系统
2.  

## URL

![Untitled](%E6%BB%91%E8%86%9C%E5%8F%98%E7%BB%93%E6%9E%84%E6%8E%A7%E5%88%B6MAT%205669c/Untitled%2020.png)